

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">

  <title>Contributing new algorithms</title>
  
  <meta name="author" content="Apache Mahout">

  <!-- Enable responsive viewport -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Bootstrap styles -->
  <link href="/assets/themes/mahout3/css/bootstrap.min.css" rel="stylesheet">
  <!-- Optional theme -->
  <link href="/assets/themes/mahout3/css/bootstrap-theme.min.css" rel="stylesheet">
  <!-- Sticky Footer -->
  <link href="/assets/themes/mahout3/css/bs-sticky-footer.css" rel="stylesheet">

  <!-- Custom styles -->
  <link href="/assets/themes/mahout3/css/style.css" rel="stylesheet" type="text/css" media="all">

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
  <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
  <![endif]-->

  <!-- Fav and touch icons -->
  <!-- Update these with your own images
    <link rel="shortcut icon" href="images/favicon.ico">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">
    <link rel="apple-touch-icon" sizes="72x72" href="images/apple-touch-icon-72x72.png">
    <link rel="apple-touch-icon" sizes="114x114" href="images/apple-touch-icon-114x114.png">
  -->

  <!-- atom & rss feed -->
  <link href="/atom.xml" type="application/atom+xml" rel="alternate" title="Sitewide ATOM Feed">
  <link href="/rss.xml" type="application/rss+xml" rel="alternate" title="Sitewide RSS Feed">
  <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
    }
  });
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i = 0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
  </script>
  <script type="text/javascript">
    var mathjax = document.createElement('script');
    mathjax.type = 'text/javascript';
    mathjax.async = true;

    mathjax.src = ('https:' == document.location.protocol) ?
        'https://c328740.ssl.cf1.rackcdn.com/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML' :
        'http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML';

      var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(mathjax, s);
  </script>
</head>

<nav class="navbar navbar-default navbar-fixed-top">
  <div class="container-fluid">
    <!-- Brand and toggle get grouped for better mobile display -->
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/">
        <img src="/assets/img/Mahout-logo-82x100.png" height="30" alt="I'm mahout">
      </a>
    </div>

    


<!-- Collect the nav links, forms, and other content for toggling -->
<div class="collapse navbar-collapse" id="main-navbar">
    <ul class="nav navbar-nav">

        <!-- Quick Start -->
        <li id="quickstart">
            <a href="/index.html" >Mahout Overview</a>
        </li>

        <li id="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Key Concepts<span class="caret"></span></a>
            <ul class="dropdown-menu">
                <li><a href="/index.html">Mahout Overview</a></li>
                <li><span><b>&nbsp;&nbsp;Scala DSL</b><span></li>
                <li><a href="/mahout-samsara/in-core-reference.html">In-core Reference</a></li>
                <li><a href="/mahout-samsara/out-of-core-reference.html">Out-of-core Reference</a></li>
                <li><a href="/mahout-samsara/faq.html">Samsara FAQ</a></li>
                <li role="separator" class="divider"></li>
                <li><span>&nbsp;&nbsp;<b>Bindings</b><span></li>
                <li><a href="/distributed/spark-bindings/">Spark Bindings</a></li>
                <li><a href="/distributed/flink-bindings.html">Flink Bindings</a></li>
                <li><a href="/distributed/flink-bindings.html">H20 Bindings</a></li>
                <!--<li role="separator" class="divider"></li>
                <li><span>&nbsp;&nbsp;<b>Native Solvers</b><span></li>
                <li><a href="/native-solvers/viennacl.html">ViennaCL</a></li>
                <li><a href="/native-solvers/viennacl-omp.html">ViennaCL-OMP</a></li>
                <li><a href="/native-solvers/cuda.html">CUDA</a></li>-->
            </ul>
        </li>

        <li id="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Tutorials<span class="caret"></span></a>
            <ul class="dropdown-menu">
                <li><span>&nbsp;&nbsp;<b>Reccomenders</b><span></li>
                <li><a href="/tutorials/cco-lastfm">CCO Example with Last.FM Data</a></li>
                <li><a href="/tutorials/intro-cooccurrence-spark">Introduction to Cooccurrence in Spark</a></li>
                <li role="separator" class="divider"></li>
                <li><span>&nbsp;&nbsp;<b>Mahout Samsara</b><span></li>
                <li><a href="/tutorials/samsara/play-with-shell.html">Playing with Samsara in Spark Shell</a></li>
                <li><a href="/tutorials/samsara/playing-with-samsara-flink-batch.html">Playing with Samsara in Flink Batch</a></li>
                <li><a href="/tutorials/samsara/classify-a-doc-from-the-shell.html">Text Classification (Shell)</a></li>
                <li><a href="/tutorials/samsara/spark-naive-bayes.html">Spark Naive Bayes</a></li>
                <li role="separator" class="divider"></li>
                <li><span>&nbsp;&nbsp;<b>Misc</b><span></li>
                <li><a href="/tutorials/misc/mahout-in-zeppelin">Mahout in Apache Zeppelin</a></li>
                <li><a href="/tutorials/misc/contributing-algos">How To Contribute a New Algorithm</a></li>
                <li><a href="/tutorials/misc/how-to-build-an-app.html">How To Build An App</a></li>
                <li role="separator" class="divider"></li>
                <li><span>&nbsp;&nbsp;<b>Deprecated</b><span></li>
                <li><a href="/tutorials/map-reduce">MapReduce</a></li>
            </ul>
        </li>


        <!-- Algorithms (Samsara / MR) -->
        <li id="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Algorithms<span class="caret"></span></a>
            <ul class="dropdown-menu">
                <li><a href="/algorithms/linear-algebra">Distributed Linear Algebra</a></li>
                <li><a href="/algorithms/preprocessors">Preprocessors</a></li>
                <li><a href="/algorithms/regression">Regression</a></li>
                <li><a href="/algorithms/reccomenders">Reccomenders</a></li>
                <li role="separator" class="divider"></li>
                <li><a href="/algorithms/map-reduce">MapReduce <i>(deprecated)</i></a></li>
            </ul>
                <!--<li><a href="/algorithms/reccomenders/recommender-overview.html">Reccomender Overview</a></li> Do we still need? seems like short version of next post-->
                <!--
                <li><a href="/algorithms/reccomenders/intro-cooccurrence-spark.html">Intro to Coocurrence With Spark</a></li>
                <li role="separator" class="divider"></li>
                <li><span>&nbsp;&nbsp;<a href="/algorithms/map-reduce"><b>MapReduce</b> (deprecated)</a><span></li>


             -->
        </li>

        <!-- Scala Docs -->
        <li id="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">API Docs<span class="caret"></span></a>
            <ul class="dropdown-menu">
                <li><a href="/0.13.0/api/index.html">0.13.0</a></li>
            </ul>
        </li>


    </ul>
    <form class="navbar-form navbar-left">
        <div class="form-group">
            <input type="text" class="form-control" placeholder="Search">
        </div>
        <button type="submit" class="btn btn-default">Submit</button>
    </form>
    <ul class="nav navbar-nav navbar-right">
        <li><a href="http://github.com/apache/mahout">Github</a></li>

        <!-- Apache -->
        <li class="dropdown">
            <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Apache <span class="caret"></span></a>
            <ul class="dropdown-menu">
                <li><a href="http://www.apache.org/foundation/how-it-works.html">Apache Software Foundation</a></li>
                <li><a href="http://www.apache.org/licenses/">Apache License</a></li>
                <li><a href="http://www.apache.org/foundation/sponsorship.html">Sponsorship</a></li>
                <li><a href="http://www.apache.org/foundation/thanks.html">Thanks</a></li>
            </ul>
        </li>

    </ul>
</div><!-- /.navbar-collapse -->

  </div><!-- /.container-fluid -->
</nav>

<body>

<div id="wrap">
  <body class="">

  <div class="container">
    <p>The Mahout community is driven by user contribution.  If you have implemented an algorithm and are interested in 
sharing it with the rest of the community, we highly encourage you to contribute it to the codebase.  However to
keep things from getting too out of control, we have instituted a standard API for our algorithms, and we ask you 
contribute your algorithm in a way that conforms to this API as much as possible.  You can always reach out on 
<a href="dev@mahout.apache.org">dev@mahout.apache.org</a> if you need help.</p>

<p>In this example, let’s say you’ve created a totally new algorithm- a regression algorithm called <code>Foo</code></p>

<p>The <code>Foo</code> algorithm is a silly algorithm- it always guesses the target is 1. Not at all useful as an algorithm, but great for
illustrating how an algorithm would be added.</p>

<h2 id="step-1-create--jira-ticket">Step 1: Create  JIRA ticket</h2>

<p>Go to <a href="https://issues.apache.org/jira/browse/MAHOUT/">the Mahout JIRA board</a> and click the red “Create” button.</p>

<p>If you don’t see the button, you may need to be granted contributor rights on the JIRA board.  Send a message to <a href="dev@mahout.apache.org">dev@mahout.apache.org</a> and someone will add you.</p>

<p>Once you click “Create” a dialog box will pop up.</p>

<p>In the Summary box write a short description, something like <code>Implement Foo Algorithm</code></p>

<p>Under assignee- click “Assign to Me”, this lets everyone know you’re working on the algorithm.</p>

<p>In the description, it would be good to describe the algorithm, and if possible link to a Wikipedia article about the algorithm/method or better yet an academic journal article.</p>

<p><img src="new-jira.png" alt="Jira Dialogue box" /></p>

<p>Once you’ve creted- a JIRA number will be assigned.  For example, here is the JIRA ticket for me writing this tutorial.</p>

<p><img src="jira.png" alt="New Issue Created" /></p>

<p>This is MAHOUT-1980.  Whatever number your new issue is assigned, we’ll refer to as XXXX for the rest of the tutorial.</p>

<h2 id="step-2-clone-mahout-and-create-branch">Step 2. Clone Mahout and create branch</h2>

<p>Supposing you don’t already have a copy of Mahout on your computer open a terminal and type the following</p>

<pre><code>git clone http://github.com/apache/mahout
</code></pre>

<p>This will clone the Mahout source code into a directory called <code>mahout</code>.  Go into that directory and create a new branch called
<code>mahout-xxxx</code> (where <code>xxxx</code> is your JIRA number from step 1)</p>

<pre><code>cd mahout
git checkout -b mahout-xxxx
</code></pre>

<h2 id="step-3-create-classes-for-your-new-algorithm">Step 3. Create Classes for your new Algorithm</h2>

<p><strong>NOTE</strong> I am using IntelliJ Community-Edition as an IDE.  There are several good IDEs that exist, and I <em>highly</em> reccomend
you use one, but you can do what you like.  As far as screen shots go though, that is what I’m working with here.</p>

<p>Create a file <code>mahout/math-scala/src/main/scala/org/apache/mahout/math/algorithms/regression/FooModel.scala</code></p>

<p>The first thing to add to the file is a license:</p>

<pre><code>/**
  * Licensed to the Apache Software Foundation (ASF) under one
  * or more contributor license agreements. See the NOTICE file
  * distributed with this work for additional information
  * regarding copyright ownership. The ASF licenses this file
  * to you under the Apache License, Version 2.0 (the
  * "License"); you may not use this file except in compliance
  * with the License. You may obtain a copy of the License at
  *
  * http://www.apache.org/licenses/LICENSE-2.0
  *
  * Unless required by applicable law or agreed to in writing,
  * software distributed under the License is distributed on an
  * "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  * KIND, either express or implied. See the License for the
  * specific language governing permissions and limitations
  * under the License.
  */
</code></pre>

<p>The next thing to add to the file is the <code>package</code> statement.</p>

<pre><code>package org.apache.mahout.math.algorithms.regression
</code></pre>

<p>And finally declare the Fitter and Model classes</p>

<pre><code>class Foo extends RegressorFitter {

}

class FooModel extends RegressorModel {

}
</code></pre>

<p>The Fitter class holds the methods for fitting which returns a Model, the Model class hold the parameters for the model and 
 methods for using on new data sets. In a RegressorModel that is going to be a <code>predict()</code> method.</p>

<p>In your algorithm, most of your code is going to go into the <code>.fit</code> method. Since this is just a silly example, we’re 
 don’t really have anything to fit- so we’re just going to return a FooModel (because that is what the Fitter must do)</p>

<pre><code>class Foo[K] extends RegressorFitter[K] {

  def fit(drmX  : DrmLike[K],
          drmTarget: DrmLike[K],
          hyperparameters: (Symbol, Any)*): FooModel[K] ={
    /**
      * Normally one would have a lot more code here.
      */

    var model = new FooModel[K]
    model.summary = "This model has been fit, I would tell you more interesting things- if there was anything to tell."
    model
  }
}

class FooModel[K] extends RegressorModel[K] {

  def predict(drmPredictors: DrmLike[K]): DrmLike[K] = {
    drmPredictors.mapBlock(1) {
      case (keys, block: Matrix) =&gt; {
        var outputBlock = new DenseMatrix(block.nrow, 1)
        keys -&gt; (outputBlock += 1.0)
      }
    }
  }
}
</code></pre>

<p>I’ve also added something to the summary string. It wasn’t a very helpful thing, but this isn’t a very helpful algorithm. I included
as a reminder to you, the person writing a useful algorithm, that this is a good place to talk about the results of the fitting.</p>

<p>At this point it would be reasonable to try building Mahout and checking that your algorithm is working the way you expect it to</p>

<pre><code>mvn clean package -DskipTests
</code></pre>

<p>I like to use the Mahout Spark-Shell for cases like this.</p>

<pre><code>cd $MAHOUT_HOME/bin
./mahout spark-shell
</code></pre>

<p>Then once I’m in the shell:</p>

<pre><code>import org.apache.mahout.math.algorithms.regression.Foo

val drmA = drmParallelize(dense((1.0, 1.2, 1.3, 1.4), (1.1, 1.5, 2.5, 1.0), (6.0, 5.2, -5.2, 5.3), (7.0,6.0, 5.0, 5.0), (10.0, 1.0, 20.0, -10.0)))

val model = new Foo().fit(drmA(::, 0 until 2), drmA(::, 2 until 3))
 
model.predict(drmA).collect
</code></pre>

<p>And everything seems to be in order.</p>

<pre><code>res5: org.apache.mahout.math.Matrix =
{
 0 =&gt;   {0:1.0}
 1 =&gt;   {0:1.0}
 2 =&gt;   {0:1.0}
 3 =&gt;   {0:1.0}
 4 =&gt;   {0:1.0}
}
</code></pre>

<h2 id="step-4-working-with-hyper-parameters">Step 4. Working with Hyper Parameters</h2>

<p>It’s entirely likely you’ll need to have hyper-parameters to tune your algorithm.</p>

<p>In Mahout we handle these with a map of Symbols. You might have noticed in the <code>fit</code> and <code>predict</code> methods we included 
<code>hyperparameters: (Symbol, Any)*</code></p>

<p>Well let’s look at how we would work with those.</p>

<p>Suppose instead of always guessing “1.0” we wanted to guess some user defined number (a very silly algorithm).</p>

<p>We’ll be adding a parameter called <code>guessThisNumber</code> to the Fitter method. By convention, we usually create a function in 
the fitter called <code>setStandardHyperparameters</code> and let that take care of setting up all of our hyperparameters and then call
that function inside of fit. This keeps things nice and clean.</p>

<pre><code>class Foo[K] extends RegressorFitter[K] {

  var guessThisNumber: Double = _

  def setStandardHyperparameters(hyperparameters: Map[Symbol, Any] = Map('foo -&gt; None)): Unit = {
    guessThisNumber = hyperparameters.asInstanceOf[Map[Symbol, Double]].getOrElse('guessThisNumber, 1.0)
  }
  def fit(drmX  : DrmLike[K],
          drmTarget: DrmLike[K],
          hyperparameters: (Symbol, Any)*): FooModel[K] ={
    /**
      * Normally one would have a lot more code here.
      */

    var model = new FooModel[K]

    setStandardHyperparameters(hyperparameters.toMap)
    model.guessThisNumber = guessThisNumber
    model.summary = s"This model will always guess ${model.guessThisNumber}"
    model
  }
}
</code></pre>

<p>Also notice we set the <em>default value</em> to 1.0.  We also now have something to add into the summary string.</p>

<p>To implement this, we’ll need to broadcast the guessed number in the <code>predict</code> method.  In Mahout you can only broadcast
<code>Vectors</code> and <code>Matrices</code>.  We use <code>drmBroadcast</code> It might be tempting to use the broadcast method of the underlying engine, but 
this is a no-no.  The reason for this is that we want to keep our algorithm abstracted over multiple distributed engines.</p>

<pre><code>class FooModel[K] extends RegressorModel[K] {

  var guessThisNumber: Double = _

  def predict(drmPredictors: DrmLike[K]): DrmLike[K] = {

    // This is needed for MapBlock
    implicit val ktag =  drmPredictors.keyClassTag

    // This is needed for broadcasting
    implicit val ctx = drmPredictors.context
    
    val bcGuess = drmBroadcast(dvec(guessThisNumber))
    drmPredictors.mapBlock(1) {
      case (keys, block: Matrix) =&gt; {
        var outputBlock = new DenseMatrix(block.nrow, 1)
        keys -&gt; (outputBlock += bcGuess.get(0))
      }
    }
  }
}
</code></pre>

<p>We can get pretty creative with what sort of information we can send out in the broadcast even when it’s just Vectors and Matrices</p>

<p>Here we get the single number we need by broadcasting it in a length 1 vector.  We then <code>get</code> our number from that position.</p>

<pre><code>keys -&gt; (outputBlock += bcGuess.get(0))
</code></pre>

<p>Let’s open up the <code>$MAHOUT_HOME/bin/mahout spark-shell</code> and try out the hyperparameter</p>

<pre><code>import org.apache.mahout.math.algorithms.regression.Foo
    
val drmA = drmParallelize(dense((1.0, 1.2, 1.3, 1.4), (1.1, 1.5, 2.5, 1.0), (6.0, 5.2, -5.2, 5.3), (7.0,6.0, 5.0, 5.0), (10.0, 1.0, 20.0, -10.0)))

val model = new Foo().fit(drmA(::, 0 until 2), drmA(::, 2 until 3), 'guessThisNumber -&gt; 2.0)
 
model.predict(drmA).collect
</code></pre>

<h2 id="step-5-unit-tests">Step 5. Unit Tests</h2>

<p>Ahh unit tests, so tedious but so important.  We want to create a unit test that will break if someone changes some other code
that causes our algorithm to fail (or guess the wrong numbers)</p>

<p>By convention, if an algorithm has been written in R it is best to make a very small sample data set, and run the R version
of the algorithm- and then verify your algorithm generates the same results, or explain why it there is divergence.</p>

<p>Since no one has implemented Foo in any other packages however, we will have to be very sure our algorithm correct by doing
it by hand in R, and in a way others can verify.  Actually- I’m not making a prototype of the Foo algorithm, but I do want to impress
that it <em>is</em> very important that you do, so that the person reviewing the PR can verify your results. (Maybe there is an example 
in the paper you read).</p>

<p>Since this is a regression model, open up</p>

<pre><code>$MAHOUT_HOME/math-scala/src/test/scala/org/apache/mahout/math/algorithms/RegressionSuiteBase.scala
</code></pre>

<p>You’ll see some other tests in there to get you started. You’ll also see some R-Prototypes, and in the case of <code>cochrane orcutt</code> 
where the R implementation had divergent results and my argument for why our algorithm was right.</p>

<p>I’m going to create a new test called <code>foo test</code> and I’m going to build it similar to the example I’ve been using.</p>

<pre><code>test("foo") {
    import org.apache.mahout.math.algorithms.regression.Foo

    val drmA = drmParallelize(dense((1.0, 1.2, 1.3, 1.4),
                                    (1.1, 1.5, 2.5, 1.0),
                                    (6.0, 5.2, -5.2, 5.3),
                                    (7.0,6.0, 5.0, 5.0),
                                    (10.0, 1.0, 20.0, -10.0)))

    val model = new Foo().fit(drmA(::, 0 until 2), drmA(::, 2 until 3), 'guessThisNumber -&gt; 2.0)

    val myAnswer = model.predict(drmA).collect
    val correctAnswer = dense( (2.0),
                                (2.0),
                                (2.0),
                                (2.0),
                                (2.0))


    val epsilon = 1E-6
    (myAnswer - correctAnswer).sum should be &lt; epsilon
  }
</code></pre>

<p>Note the use of <code>epsilon</code>.  The answer really <em>should be</em> 0.0. But, especially for more complicated algorithms, we allow 
for a touch of machine rounding error.</p>

<p>Now build and check your tests by building without skipping the tests</p>

<pre><code>mvn clean package
</code></pre>

<h2 id="step-6-add-documentation-to-the-website">Step 6. Add documentation to the website.</h2>

<p>Now you’ve created this awesome algorithm- time to do a little marketing!  Create the following file:</p>

<pre><code>$MAHOUT_HOME/website/docs/algorithms/regression/foo.md
</code></pre>

<p>In that file create a blank Jekyll template:</p>

<pre><code>---
layout: algorithm
title: Foo
theme:
    name: mahout2
---

### About

Foo is a very famous and useful algorithm. Let me tell you lots about it...

[A mark down link](https://en.wikipedia.org/wiki/Foobar)

### Parameters

&lt;div class="table-striped"&gt;
  &lt;table class="table"&gt;
    &lt;tr&gt;
        &lt;th&gt;Parameter&lt;/th&gt;
        &lt;th&gt;Description&lt;/th&gt;
        &lt;th&gt;Default Value&lt;/th&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
        &lt;td&gt;&lt;code&gt;'guessThisNumber&lt;/code&gt;&lt;/td&gt;
        &lt;td&gt;The number to guess&lt;/td&gt;
        &lt;td&gt;&lt;code&gt;1.0&lt;/code&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;/table&gt;
    &lt;/div&gt;

### Example
import org.apache.mahout.math.algorithms.regression.Foo
        
val drmA = drmParallelize(dense((1.0, 1.2, 1.3, 1.4), (1.1, 1.5, 2.5, 1.0), (6.0, 5.2, -5.2, 5.3), (7.0,6.0, 5.0, 5.0), (10.0, 1.0, 20.0, -10.0)))

val model = new Foo().fit(drmA(::, 0 until 2), drmA(::, 2 until 3), 'guessThisNumber -&gt; 2.0)
 
model.predict(drmA).collect
</code></pre>

<p>The firse few lines between the <code>---</code> is the header, this has the title and tells Jekyll what sort of page this is, it knows 
elsewhere based on that, how to compile the page (add navbars, etc).</p>

<p>The <em>About</em> section, is your chance to really dive into the algorithm and its implementation. More is more. If you didn’t have an 
R prototype in the unit tests (or have a divergent answer from R) this is a good place to really expand on that.</p>

<p>The <em>Parameters</em> section is a good reference for users to know that the hyperparameters are and what they do.</p>

<p>The <em>Example</em> section is a quick little example to get users started. You may have noticed I used the same code I used in 
the unit test.  That’s something I do often, but there is no reason you have to. If you want to come up with a more illustrative example 
(or several illustrative examples) that’s encouraged.
Add links to the nav-bars</p>

<pre><code>$MAHOUT_HOME/website/docs/_includes/algo_navbar.html
$MAHOUT_HOME/website/docs/_includes/navbar.html
</code></pre>

<p>You can look at the links already in there, but it’s going to look something like</p>

<pre><code>&lt;li&gt; &lt;a href="/algorithms/regression/Foo.html"&gt;Foo&lt;/a&gt;&lt;/li&gt;
</code></pre>

<p>Jeckyll will convert your *.md file into *.html at the same place on the directory tree.</p>

<p>To check that your webpage look right:</p>

<pre><code>cd $MAHOUT_HOME/website/docs
jeckyll --serve
</code></pre>

<p>Then open a webbrowser and go to <a href="http://localhost:4000">http://localhost:4000</a></p>

<p>If you’re feeling really froggy- you’re also welcome to add a tutorial :)</p>

<h2 id="step-7-commit-changes-push-to-github-and-open-a-pr">Step 7. Commit Changes, Push to Github, and Open a PR</h2>

<p>Open a terminal, return to the <code>mahout</code> top directory and type</p>

<pre><code>git status
</code></pre>

<p>You’ll see <code>Changes not staged for commit</code>.</p>

<p>Any file you touched will be listed there, but we only want to stage the files we were in.</p>

<p>For this tutorial it was</p>

<pre><code>git add mahout/math-scala/src/main/scala/org/apache/mahout/math/algorithms/regression/FooModel.scala
git add math-scala/src/test/scala/org/apache/mahout/math/algorithms/RegressionSuiteBase.scala
git add website/docs/algorithms/regression/foo.md
git add website/docs/_includes/algo_navbar.html
git add website/docs/_includes/navbar.html
</code></pre>

<p>Now we <em>commit</em> our changes. We add a message that starts with <code>MAHOUT-xxxx</code> where <code>xxxx</code> is the JIRA number your issue was
assigned, then a descriptive title.</p>

<pre><code>git commit -m "MAHOUT-xxxx Implement Foo Algorithm"
</code></pre>

<p>Finally, <em>push</em> the changes to your local repository. The <code>-u</code> flag will create a new branch</p>

<pre><code>git push -u origin mahout-xxxx
</code></pre>

<p>Now in your browser, go to <a href="http://github.com/yourusername/mahout">http://github.com/yourusername/mahout</a></p>

<p>There is a “branch” drop down menu- scroll down and find <code>mahout-xxxx</code></p>

<p><img src="github-branch.png" alt="i have lots of issues" /></p>

<p>Towards the top, off to the right, you’ll see a link to “Pull Request”, click on this- and follow the prompts!</p>

<p><img src="create-pr.png" alt="create PR" /></p>

<h2 id="conclusion">Conclusion</h2>

<p>That’s it!  Thanks so much for contributing to Apache Mahout, users like you are what keep this project moving forward!</p>

<p>I’ve included <a href="Foo.scala">Foo.scala</a> and <a href="RegressionSuiteBase.scala">RegressionSuiteBase.scala</a> for reference.</p>

  </div>


</div>

<div id="footer">
  <div class="container">
    <p>&copy; 2017 Apache Mahout
      with help from <a href="http://jekyllbootstrap.com" target="_blank" title="The Definitive Jekyll Blogging Framework">Jekyll Bootstrap</a>
      and <a href="http://getbootstrap.com" target="_blank">Bootstrap</a>
    </p>
  </div>
</div>







<!-- Latest compiled and minified JavaScript, requires jQuery 1.x (2.x not supported in IE8) -->
<!-- Placed at the end of the document so the pages load faster -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
<script src="/assets/themes/mahout3/js/bootstrap.min.js"></script>
</body>
</html>

